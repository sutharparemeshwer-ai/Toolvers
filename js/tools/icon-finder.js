// js/tools/icon-finder.js

// --- DOM Elements ---
let searchInput, resultsGrid, resultsCount, noResultsMsg;

// --- Icon Data ---
// A curated list of Font Awesome free solid icons.
const ICON_LIST = [
  "address-book",
  "address-card",
  "adjust",
  "align-center",
  "align-justify",
  "align-left",
  "align-right",
  "ambulance",
  "anchor",
  "angle-down",
  "angle-left",
  "angle-right",
  "angle-up",
  "archive",
  "arrow-alt-circle-down",
  "arrow-alt-circle-left",
  "arrow-alt-circle-right",
  "arrow-alt-circle-up",
  "arrow-down",
  "arrow-left",
  "arrow-right",
  "arrow-up",
  "arrows-alt",
  "arrows-alt-h",
  "arrows-alt-v",
  "assistive-listening-systems",
  "asterisk",
  "at",
  "atom",
  "audio-description",
  "award",
  "baby",
  "backward",
  "balance-scale",
  "ban",
  "band-aid",
  "barcode",
  "bars",
  "baseball-ball",
  "basketball-ball",
  "bath",
  "battery-empty",
  "battery-full",
  "battery-half",
  "battery-quarter",
  "battery-three-quarters",
  "bed",
  "beer",
  "bell",
  "bell-slash",
  "bicycle",
  "binoculars",
  "birthday-cake",
  "blender",
  "blind",
  "bold",
  "bolt",
  "bomb",
  "bone",
  "book",
  "book-open",
  "bookmark",
  "bowling-ball",
  "box",
  "box-open",
  "boxes",
  "braille",
  "briefcase",
  "broadcast-tower",
  "broom",
  "brush",
  "bug",
  "building",
  "bullhorn",
  "bullseye",
  "burn",
  "bus",
  "calculator",
  "calendar",
  "calendar-alt",
  "calendar-check",
  "calendar-minus",
  "calendar-plus",
  "calendar-times",
  "camera",
  "camera-retro",
  "car",
  "caret-down",
  "caret-left",
  "caret-right",
  "caret-up",
  "cart-arrow-down",
  "cart-plus",
  "cat",
  "certificate",
  "chair",
  "chalkboard",
  "chart-area",
  "chart-bar",
  "chart-line",
  "chart-pie",
  "check",
  "check-circle",
  "check-double",
  "check-square",
  "chess",
  "chevron-down",
  "chevron-left",
  "chevron-right",
  "chevron-up",
  "child",
  "church",
  "circle",
  "clipboard",
  "clock",
  "clone",
  "closed-captioning",
  "cloud",
  "cloud-download-alt",
  "cloud-upload-alt",
  "code",
  "code-branch",
  "coffee",
  "cog",
  "cogs",
  "coins",
  "columns",
  "comment",
  "comment-alt",
  "comment-dots",
  "comment-slash",
  "comments",
  "compact-disc",
  "compass",
  "compress",
  "copy",
  "copyright",
  "couch",
  "credit-card",
  "crop",
  "crosshairs",
  "crown",
  "cube",
  "cubes",
  "cut",
  "database",
  "deaf",
  "desktop",
  "diagnoses",
  "dice",
  "divide",
  "dizzy",
  "dna",
  "dollar-sign",
  "dolly",
  "dolly-flatbed",
  "donate",
  "door-closed",
  "door-open",
  "dove",
  "download",
  "drafting-compass",
  "dragon",
  "draw-polygon",
  "drum",
  "dumbbell",
  "edit",
  "eject",
  "ellipsis-h",
  "ellipsis-v",
  "envelope",
  "envelope-open",
  "equals",
  "eraser",
  "euro-sign",
  "exchange-alt",
  "exclamation",
  "exclamation-circle",
  "exclamation-triangle",
  "expand",
  "expand-arrows-alt",
  "external-link-alt",
  "eye",
  "eye-dropper",
  "eye-slash",
  "fast-backward",
  "fast-forward",
  "fax",
  "feather",
  "female",
  "fighter-jet",
  "file",
  "file-alt",
  "file-archive",
  "file-audio",
  "file-code",
  "file-excel",
  "file-image",
  "file-pdf",
  "file-powerpoint",
  "file-video",
  "file-word",
  "fill",
  "film",
  "filter",
  "fire",
  "fire-extinguisher",
  "first-aid",
  "fish",
  "flag",
  "flask",
  "flushed",
  "folder",
  "folder-open",
  "font",
  "football-ball",
  "forward",
  "frog",
  "frown",
  "futbol",
  "gamepad",
  "gas-pump",
  "gavel",
  "gem",
  "genderless",
  "gift",
  "glass-martini",
  "glasses",
  "globe",
  "golf-ball",
  "graduation-cap",
  "greater-than",
  "grimace",
  "grin",
  "guitar",
  "h-square",
  "hamburger",
  "hand-holding-heart",
  "hand-holding-usd",
  "hand-paper",
  "hand-peace",
  "hand-point-down",
  "hand-point-left",
  "hand-point-right",
  "hand-point-up",
  "hand-pointer",
  "hand-rock",
  "hand-scissors",
  "hand-spock",
  "hands",
  "hands-helping",
  "handshake",
  "hashtag",
  "hdd",
  "heading",
  "headphones",
  "headset",
  "heart",
  "heartbeat",
  "helicopter",
  "highlighter",
  "history",
  "hockey-puck",
  "home",
  "hospital",
  "hotel",
  "hourglass",
  "i-cursor",
  "ice-cream",
  "id-badge",
  "id-card",
  "image",
  "images",
  "inbox",
  "indent",
  "industry",
  "infinity",
  "info",
  "info-circle",
  "italic",
  "key",
  "keyboard",
  "kiss",
  "kiwi-bird",
  "landmark",
  "language",
  "laptop",
  "laugh",
  "leaf",
  "lemon",
  "less-than",
  "level-down-alt",
  "level-up-alt",
  "life-ring",
  "lightbulb",
  "link",
  "lira-sign",
  "list",
  "list-alt",
  "list-ol",
  "list-ul",
  "location-arrow",
  "lock",
  "lock-open",
  "low-vision",
  "magic",
  "magnet",
  "male",
  "map",
  "map-marker",
  "map-pin",
  "map-signs",
  "marker",
  "mars",
  "medal",
  "medkit",
  "meh",
  "mercury",
  "microchip",
  "microphone",
  "microphone-slash",
  "microscope",
  "minus",
  "minus-circle",
  "minus-square",
  "mobile",
  "mobile-alt",
  "money-bill",
  "money-bill-wave",
  "moon",
  "motorcycle",
  "mouse-pointer",
  "music",
  "neuter",
  "newspaper",
  "not-equal",
  "notes-medical",
  "object-group",
  "object-ungroup",
  "outdent",
  "paint-brush",
  "palette",
  "paper-plane",
  "paperclip",
  "parachute-box",
  "paragraph",
  "parking",
  "paste",
  "pause",
  "pause-circle",
  "paw",
  "pen",
  "pen-alt",
  "pen-fancy",
  "pen-nib",
  "pen-square",
  "pencil-alt",
  "percent",
  "percentage",
  "phone",
  "phone-slash",
  "phone-square",
  "phone-volume",
  "piggy-bank",
  "pills",
  "plane",
  "play",
  "play-circle",
  "plug",
  "plus",
  "plus-circle",
  "plus-square",
  "podcast",
  "poo",
  "portrait",
  "pound-sign",
  "power-off",
  "prescription-bottle",
  "print",
  "procedures",
  "project-diagram",
  "puzzle-piece",
  "qrcode",
  "question",
  "question-circle",
  "quidditch",
  "quote-left",
  "quote-right",
  "random",
  "receipt",
  "recycle",
  "redo",
  "redo-alt",
  "registered",
  "reply",
  "reply-all",
  "retweet",
  "ribbon",
  "road",
  "robot",
  "rocket",
  "route",
  "rss",
  "rss-square",
  "ruble-sign",
  "ruler",
  "rupee-sign",
  "sad-cry",
  "sad-tear",
  "save",
  "school",
  "screwdriver",
  "search",
  "search-minus",
  "search-plus",
  "seedling",
  "server",
  "share",
  "share-alt",
  "share-square",
  "shekel-sign",
  "shield-alt",
  "ship",
  "shipping-fast",
  "shoe-prints",
  "shopping-bag",
  "shopping-basket",
  "shopping-cart",
  "shower",
  "sign",
  "sign-in-alt",
  "sign-language",
  "sign-out-alt",
  "signal",
  "sitemap",
  "skull",
  "sliders-h",
  "smile",
  "smoking",
  "snowflake",
  "solar-panel",
  "sort",
  "sort-alpha-down",
  "sort-alpha-up",
  "sort-amount-down",
  "sort-amount-up",
  "sort-down",
  "sort-numeric-down",
  "sort-numeric-up",
  "sort-up",
  "space-shuttle",
  "spinner",
  "spray-can",
  "square",
  "square-root-alt",
  "stamp",
  "star",
  "star-half",
  "step-backward",
  "step-forward",
  "stethoscope",
  "sticky-note",
  "stop",
  "stop-circle",
  "stopwatch",
  "store",
  "stream",
  "street-view",
  "strikethrough",
  "subscript",
  "subway",
  "suitcase",
  "sun",
  "superscript",
  "sync",
  "sync-alt",
  "syringe",
  "table",
  "tablet",
  "tablet-alt",
  "tachometer-alt",
  "tag",
  "tags",
  "tape",
  "tasks",
  "taxi",
  "terminal",
  "text-height",
  "text-width",
  "th",
  "th-large",
  "th-list",
  "thermometer",
  "thermometer-empty",
  "thermometer-full",
  "thermometer-half",
  "thermometer-quarter",
  "thermometer-three-quarters",
  "thumbs-down",
  "thumbs-up",
  "thumbtack",
  "ticket-alt",
  "times",
  "times-circle",
  "tint",
  "toggle-off",
  "toggle-on",
  "toolbox",
  "tooth",
  "trademark",
  "traffic-light",
  "train",
  "transgender",
  "transgender-alt",
  "trash",
  "trash-alt",
  "tree",
  "trophy",
  "truck",
  "tty",
  "tv",
  "umbrella",
  "underline",
  "undo",
  "undo-alt",
  "universal-access",
  "university",
  "unlink",
  "unlock",
  "unlock-alt",
  "upload",
  "user",
  "user-alt",
  "user-circle",
  "user-clock",
  "user-cog",
  "user-edit",
  "user-friends",
  "user-graduate",
  "user-lock",
  "user-md",
  "user-minus",
  "user-ninja",
  "user-plus",
  "user-secret",
  "user-shield",
  "user-slash",
  "user-tag",
  "user-tie",
  "user-times",
  "users",
  "users-cog",
  "utensil-spoon",
  "utensils",
  "vector-square",
  "venus",
  "venus-mars",
  "video",
  "video-slash",
  "volleyball-ball",
  "volume-down",
  "volume-mute",
  "volume-off",
  "volume-up",
  "walking",
  "wallet",
  "warehouse",
  "weight",
  "wheelchair",
  "wifi",
  "window-close",
  "window-maximize",
  "window-minimize",
  "window-restore",
  "wine-glass",
  "won-sign",
  "wrench",
  "x-ray",
  "yen-sign",
];

/**
 * Renders a list of icons into the grid.
 * @param {string[]} icons - An array of icon names to render.
 */
function renderIcons(icons) {
  resultsGrid.innerHTML = "";
  if (icons.length === 0) {
    noResultsMsg.classList.remove("d-none");
    resultsGrid.classList.add("d-none");
  } else {
    noResultsMsg.classList.add("d-none");
    resultsGrid.classList.remove("d-none");
  }

  resultsCount.textContent = `${icons.length} of ${ICON_LIST.length} icons shown.`;

  const fragment = document.createDocumentFragment();
  icons.forEach((iconName) => {
    const col = document.createElement("div");
    col.className = "col-6 col-sm-4 col-md-3 col-lg-2";

    const card = document.createElement("div");
    card.className = "card h-100 icon-card";
    card.dataset.iconClass = `fa-solid fa-${iconName}`;
    card.title = `Click to copy "fa-solid fa-${iconName}"`;

    card.innerHTML = `
            <div class="card-body d-flex flex-column align-items-center justify-content-center">
                <i class="fa-solid fa-${iconName} fa-2x mb-2"></i>
                <p class="small  mb-0">${iconName}</p>
            </div>
        `;
    col.appendChild(card);
    fragment.appendChild(col);
  });
  resultsGrid.appendChild(fragment);
}

function handleSearch() {
  const query = searchInput.value.trim().toLowerCase();
  if (!query) {
    renderIcons(ICON_LIST);
    return;
  }
  const filteredIcons = ICON_LIST.filter((icon) => icon.includes(query));
  renderIcons(filteredIcons);
}

function handleIconClick(event) {
  const card = event.target.closest(".icon-card");
  if (!card) return;

  const classToCopy = card.dataset.iconClass;
  navigator.clipboard
    .writeText(classToCopy)
    .then(() => {
      alert(`Copied "${classToCopy}" to clipboard!`);
    })
    .catch((err) => {
      console.error("Failed to copy icon class:", err);
      alert("Could not copy to clipboard.");
    });
}

// --- Router Hooks ---

export function init() {
  // Get DOM elements
  searchInput = document.getElementById("icon-search-input");
  resultsGrid = document.getElementById("icon-results-grid");
  resultsCount = document.getElementById("icon-results-count");
  noResultsMsg = document.getElementById("no-icons-found");

  // Initial render
  renderIcons(ICON_LIST);

  // Attach event listeners
  searchInput.addEventListener("input", handleSearch);
  resultsGrid.addEventListener("click", handleIconClick);
}

export function cleanup() {
  // Cleanup if needed
}
